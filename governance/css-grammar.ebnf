// ============================================================================
// EXPANDED CSS CLASS SYSTEM
// ============================================================================

// Atomic class generation system
css_classes       = "@classes", class_config, "{", class_categories, "}" ;

class_config      = "[",
                    "prefix:", [ string ], ",",
                    "separator:", ( "-" | "_" | "/" | "none" ), ",",
                    "responsive:", boolean, ",",
                    "dark_mode:", boolean, ",",
                    "important:", boolean, ",",
                    "minify:", boolean, ",",
                    "sourcemaps:", boolean,
                    "]" ;

class_categories  = { class_category } ;
class_category    = category_name, "{", class_groups, "}" ;
category_name     = "layout" | "flexbox" | "grid" | "spacing" | "sizing" 
                  | "typography" | "colors" | "backgrounds" | "borders" 
                  | "effects" | "filters" | "transforms" | "transitions" 
                  | "animation" | "svg" | "tensor" | "interactivity" 
                  | "tables" | "forms" | "accessibility" | "utilities" 
                  | "custom", identifier ;

// ============================================================================
// LAYOUT CLASSES
// ============================================================================
layout_classes    = "layout", "{", 
                    display_classes, position_classes, 
                    float_classes, clear_classes, overflow_classes,
                    z_index_classes, visibility_classes,
                    isolation_classes, "}" ;

display_classes   = "display:", "[",
                    { display_value, [","] },
                    "]" ;
display_value     = "block" | "inline" | "inline-block" | "flex" | "inline-flex" 
                  | "grid" | "inline-grid" | "table" | "inline-table" | "table-cell" 
                  | "table-row" | "table-column" | "table-caption" | "flow-root" 
                  | "contents" | "list-item" | "hidden" | "none" ;

position_classes  = "position:", "[",
                    { position_value, [","] },
                    "]" ;
position_value    = "static" | "relative" | "absolute" | "fixed" | "sticky" ;

float_classes     = "float:", "[", "left", "right", "none", "]" ;
clear_classes     = "clear:", "[", "left", "right", "both", "none", "]" ;

overflow_classes  = "overflow:", "[",
                    axis, ":", overflow_value, [","],
                    "]" ;
axis             = "x" | "y" | "" ;
overflow_value    = "auto" | "hidden" | "visible" | "scroll" | "clip" ;

z_index_classes   = "z_index:", "[",
                    auto_value, ",",
                    numeric_range, [",", "negative"],
                    "]" ;
auto_value        = "auto" ;
numeric_range     = integer, "..", integer ;

visibility_classes = "visibility:", "[", "visible", "hidden", "collapse", "]" ;
isolation_classes = "isolation:", "[", "isolate", "auto", "]" ;

// ============================================================================
// FLEXBOX CLASSES
// ============================================================================
flexbox_classes   = "flexbox", "{",
                    flex_direction_classes, flex_wrap_classes,
                    flex_grow_classes, flex_shrink_classes, flex_basis_classes,
                    justify_content_classes, align_items_classes,
                    align_content_classes, align_self_classes,
                    order_classes, gap_classes,
                    "}" ;

flex_direction_classes = "direction:", "[", 
                         "row", "row-reverse", "column", "column-reverse", 
                         "]" ;
flex_wrap_classes = "wrap:", "[", "nowrap", "wrap", "wrap-reverse", "]" ;

flex_grow_classes = "grow:", "[",
                    numeric_range, [",", "initial", ",", "inherit"],
                    "]" ;
flex_shrink_classes = "shrink:", "[",
                      numeric_range, [",", "initial", ",", "inherit"],
                      "]" ;
flex_basis_classes = "basis:", "[",
                     length_values, [",", "auto", ",", "fill", ",", "content"],
                     "]" ;
length_values     = { length_value, [","] } ;
length_value      = number, unit | "0" | "full" | "screen" | "min" | "max" 
                  | "fit" | "min-content" | "max-content" ;

justify_content_classes = "justify:", "[",
                          "start", "end", "center", "between", "around", 
                          "evenly", "stretch", "]" ;
align_items_classes = "items:", "[",
                      "start", "end", "center", "baseline", "stretch",
                      "]" ;
align_content_classes = "content:", "[",
                        "start", "end", "center", "between", "around",
                        "evenly", "stretch", "baseline",
                        "]" ;
align_self_classes = "self:", "[",
                     "auto", "start", "end", "center", "stretch", "baseline",
                     "]" ;
order_classes     = "order:", "[",
                    numeric_range, [",", "first", ",", "last", ",", "none"],
                    "]" ;
gap_classes       = "gap:", "[",
                    spacing_scale, [",", "row", ",", "column"],
                    "]" ;

// ============================================================================
// GRID CLASSES
// ============================================================================
grid_classes      = "grid", "{",
                    grid_template_classes, grid_auto_classes,
                    grid_placement_classes, grid_area_classes,
                    grid_gap_classes, "}" ;

grid_template_classes = "template:", "[",
                        "cols:", column_templates, ",",
                        "rows:", row_templates, ",",
                        "areas:", area_templates,
                        "]" ;
column_templates  = { template_value, [","] } ;
row_templates     = { template_value, [","] } ;
template_value    = length_value | "minmax(", length_value, ",", length_value, ")"
                  | "repeat(", integer, ",", length_value, ")"
                  | "fit-content(", length_value, ")"
                  | "subgrid" | "masonry" ;
area_templates    = string | "none" ;

grid_auto_classes = "auto:", "[",
                    "flow:", "[", "row", "column", "dense", "row-dense", "column-dense", "]", ",",
                    "columns:", auto_track_sizes, ",",
                    "rows:", auto_track_sizes,
                    "]" ;
auto_track_sizes  = { auto_track_size, [","] } ;
auto_track_size   = length_value | "min-content" | "max-content" | "auto" ;

grid_placement_classes = "placement:", "[",
                         "col:", placement_values, ",",
                         "row:", placement_values, ",",
                         "start:", placement_values, ",",
                         "end:", placement_values,
                         "]" ;
placement_values  = { placement_value, [","] } ;
placement_value   = integer | "auto" | "span", integer | "full" ;

grid_area_classes = "area:", "[",
                    area_names, [",", "auto"],
                    "]" ;
area_names        = { identifier, [","] } ;

grid_gap_classes  = "gap:", "[",
                    spacing_scale, [",", "row", ",", "column"],
                    "]" ;

// ============================================================================
// SPACING CLASSES
// ============================================================================
spacing_classes   = "spacing", "{",
                    margin_classes, padding_classes,
                    "}" ;

margin_classes    = "margin:", "[",
                    sides, ":", spacing_values, [","],
                    "]" ;
padding_classes   = "padding:", "[",
                    sides, ":", spacing_values, [","],
                    "]" ;

sides             = "" | "t" | "r" | "b" | "l" | "x" | "y" | "s" | "e" ;
spacing_values    = { spacing_value, [","] } ;
spacing_value     = "auto" | number, unit | css_variable ;
spacing_scale     = spacing_scale_def | "[", spacing_values, "]" ;
spacing_scale_def = "scale:", integer, "..", integer, ",", "step:", number ;

// ============================================================================
// SIZING CLASSES
// ============================================================================
sizing_classes    = "sizing", "{",
                    width_classes, height_classes,
                    min_width_classes, max_width_classes,
                    min_height_classes, max_height_classes,
                    aspect_ratio_classes, box_sizing_classes,
                    "}" ;

width_classes     = "width:", "[",
                    size_values, [",", "auto", ",", "full", ",", "screen"],
                    "]" ;
height_classes    = "height:", "[",
                    size_values, [",", "auto", ",", "full", ",", "screen"],
                    "]" ;

min_width_classes = "min_width:", "[",
                    size_values, [",", "min", ",", "max", ",", "fit"],
                    "]" ;
max_width_classes = "max_width:", "[",
                    size_values, [",", "none", ",", "full", ",", "screen"],
                    "]" ;

min_height_classes = "min_height:", "[",
                     size_values, [",", "min", ",", "screen"],
                     "]" ;
max_height_classes = "max_height:", "[",
                     size_values, [",", "none", ",", "screen"],
                     "]" ;

size_values       = { size_value, [","] } ;
size_value        = length_value | percentage | fraction | "fit-content" 
                  | "min-content" | "max-content" | "stretch" ;
fraction          = integer, "/", integer ;

aspect_ratio_classes = "aspect:", "[",
                       ratios, [",", "auto", ",", "square", ",", "video"],
                       "]" ;
ratios            = { ratio, [","] } ;
ratio             = integer, "/", integer | "auto" ;

box_sizing_classes = "box_sizing:", "[", "border-box", "content-box", "]" ;

// ============================================================================
// TYPOGRAPHY CLASSES
// ============================================================================
typography_classes = "typography", "{",
                     font_family_classes, font_size_classes,
                     font_weight_classes, font_style_classes,
                     font_variant_classes, line_height_classes,
                     letter_spacing_classes, word_spacing_classes,
                     text_align_classes, text_decoration_classes,
                     text_transform_classes, white_space_classes,
                     text_overflow_classes, writing_mode_classes,
                     "}" ;

font_family_classes = "font_family:", "[",
                      families, [",", "sans", ",", "serif", ",", "mono"],
                      "]" ;
families          = { family, [","] } ;
family            = string | generic_family ;
generic_family    = "serif" | "sans-serif" | "monospace" | "cursive" 
                  | "fantasy" | "system-ui" | "emoji" | "math" | "fangsong" ;

font_size_classes = "font_size:", "[",
                    size_scale, [",", "fluid"],
                    "]" ;
size_scale        = scaling_system | "[", font_sizes, "]" ;
scaling_system    = "scale:", ( "linear" | "modular" | "golden" | "perfect-fourth" 
                              | "major-third" ), ",", "base:", number, ",", "ratio:", number ;
font_sizes        = { font_size, [","] } ;
font_size         = length_value | css_variable ;

font_weight_classes = "font_weight:", "[",
                      weights, [",", "thin", ",", "light", ",", "normal", 
                      ",", "medium", ",", "semibold", ",", "bold", ",", "extrabold"],
                      "]" ;
weights           = { weight_value, [","] } ;
weight_value      = integer | "normal" | "bold" | "lighter" | "bolder" ;

font_style_classes = "font_style:", "[", "normal", "italic", "oblique", "]" ;
font_variant_classes = "font_variant:", "[",
                       "normal", "small-caps", "all-small-caps", 
                       "petite-caps", "all-petite-caps", "unicase",
                       "titling-caps", "ordinal", "slashed-zero",
                       "lining-nums", "oldstyle-nums", "proportional-nums",
                       "tabular-nums", "diagonal-fractions", "stacked-fractions",
                       "]" ;

line_height_classes = "line_height:", "[",
                      line_heights, [",", "none", ",", "tight", ",", "snug",
                      ",", "normal", ",", "relaxed", ",", "loose"],
                      "]" ;
line_heights      = { line_height, [","] } ;
line_height       = number | length_value ;

letter_spacing_classes = "letter_spacing:", "[",
                         spacings, [",", "tighter", ",", "tight", 
                         ",", "normal", ",", "wide", ",", "wider"],
                         "]" ;
spacings          = { spacing, [","] } ;
spacing           = length_value ;

word_spacing_classes = "word_spacing:", "[",
                       spacings, [",", "normal"],
                       "]" ;

text_align_classes = "text_align:", "[",
                     "left", "center", "right", "justify", "start", "end",
                     "]" ;

text_decoration_classes = "text_decoration:", "[",
                          "line:", "[", "underline", "overline", "line-through", "none", "]", ",",
                          "style:", "[", "solid", "double", "dotted", "dashed", "wavy", "]", ",",
                          "thickness:", length_values, ",",
                          "offset:", length_values,
                          "]" ;

text_transform_classes = "text_transform:", "[",
                         "uppercase", "lowercase", "capitalize", "none",
                         "]" ;

white_space_classes = "white_space:", "[",
                      "normal", "nowrap", "pre", "pre-line", "pre-wrap",
                      "break-spaces",
                      "]" ;

text_overflow_classes = "text_overflow:", "[",
                        "ellipsis", "clip", "(", string, ")",
                        "]" ;

writing_mode_classes = "writing_mode:", "[",
                       "horizontal-tb", "vertical-rl", "vertical-lr",
                       "]" ;

// ============================================================================
// COLOR CLASSES
// ============================================================================
color_classes     = "colors", "{",
                    text_color_classes, background_color_classes,
                    border_color_classes, fill_classes, stroke_classes,
                    accent_color_classes, color_scheme_classes,
                    opacity_classes, "}" ;

text_color_classes = "text:", "[",
                     color_values, [",", "current", ",", "inherit", ",", "transparent"],
                     "]" ;

background_color_classes = "bg:", "[",
                           color_values, [",", "current", ",", "inherit", ",", "transparent"],
                           "]" ;

border_color_classes = "border:", "[",
                       color_values, [",", "current", ",", "inherit", ",", "transparent"],
                       "]" ;

fill_classes      = "fill:", "[",
                    color_values, [",", "current", ",", "none"],
                    "]" ;

stroke_classes    = "stroke:", "[",
                    color_values, [",", "current", ",", "none"],
                    "]" ;

accent_color_classes = "accent:", "[",
                       color_values, [",", "auto"],
                       "]" ;

color_scheme_classes = "color_scheme:", "[",
                       "light", "dark", "only", "light dark",
                       "]" ;

opacity_classes   = "opacity:", "[",
                    opacity_values, [",", "0", ",", "5", ",", "10", ",", "20",
                    ",", "25", ",", "30", ",", "40", ",", "50", ",", "60",
                    ",", "70", ",", "75", ",", "80", ",", "90", ",", "95",
                    ",", "100"],
                    "]" ;
opacity_values    = { opacity_value, [","] } ;
opacity_value     = number | percentage ;

color_values      = { color_value, [","] } ;
color_value       = named_color | hex_color | rgb_color | rgba_color 
                  | hsl_color | hsla_color | css_variable | current_color ;
named_color       = "transparent" | "currentColor" | "inherit" | color_name ;
color_name        = "red" | "green" | "blue" | "black" | "white" | "gray" 
                  | "slate" | "zinc" | "neutral" | "stone" | "orange" 
                  | "amber" | "yellow" | "lime" | "emerald" | "teal" 
                  | "cyan" | "sky" | "indigo" | "violet" | "purple" 
                  | "fuchsia" | "pink" | "rose" ;

// ============================================================================
// BACKGROUND CLASSES
// ============================================================================
background_classes = "backgrounds", "{",
                     bg_image_classes, bg_position_classes,
                     bg_size_classes, bg_repeat_classes,
                     bg_attachment_classes, bg_blend_mode_classes,
                     bg_clip_classes, bg_origin_classes,
                     "}" ;

bg_image_classes  = "image:", "[",
                    image_sources, [",", "none"],
                    "]" ;
image_sources     = { image_source, [","] } ;
image_source      = "url(", string, ")" | gradient_spec | "none" ;

bg_position_classes = "position:", "[",
                      positions, [",", "center", ",", "top", ",", "bottom",
                      ",", "left", ",", "right"],
                      "]" ;
positions         = { position, [","] } ;
position          = length_value | percentage | position_keyword ;
position_keyword  = "left" | "right" | "top" | "bottom" | "center" ;

bg_size_classes   = "size:", "[",
                    sizes, [",", "auto", ",", "cover", ",", "contain"],
                    "]" ;
sizes             = { size, [","] } ;
size              = length_value | percentage | "auto" | "cover" | "contain" ;

bg_repeat_classes = "repeat:", "[",
                    repeat_styles, [",", "repeat", ",", "no-repeat",
                    ",", "repeat-x", ",", "repeat-y", ",", "round", ",", "space"],
                    "]" ;
repeat_styles     = { repeat_style, [","] } ;
repeat_style      = "repeat" | "no-repeat" | "repeat-x" | "repeat-y" 
                  | "round" | "space" ;

bg_attachment_classes = "attachment:", "[",
                        "fixed", "local", "scroll",
                        "]" ;

bg_blend_mode_classes = "blend_mode:", "[",
                        blend_modes, [",", "normal", ",", "multiply"],
                        "]" ;
blend_modes       = { blend_mode, [","] } ;
blend_mode        = "normal" | "multiply" | "screen" | "overlay" | "darken" 
                  | "lighten" | "color-dodge" | "color-burn" | "hard-light" 
                  | "soft-light" | "difference" | "exclusion" | "hue" 
                  | "saturation" | "color" | "luminosity" ;

bg_clip_classes   = "clip:", "[",
                    "border-box", "padding-box", "content-box", "text",
                    "]" ;

bg_origin_classes = "origin:", "[",
                    "border-box", "padding-box", "content-box",
                    "]" ;

// ============================================================================
// BORDER CLASSES
// ============================================================================
border_classes    = "borders", "{",
                    border_width_classes, border_style_classes,
                    border_color_classes, border_radius_classes,
                    border_collapse_classes, border_spacing_classes,
                    outline_classes, "}" ;

border_width_classes = "width:", "[",
                       sides, ":", border_widths, [","],
                       "]" ;
border_widths     = { border_width, [","] } ;
border_width      = length_value | "thin" | "medium" | "thick" ;

border_style_classes = "style:", "[",
                       border_styles, [",", "solid", ",", "dashed", ",", "dotted"],
                       "]" ;
border_styles     = { border_style, [","] } ;
border_style      = "solid" | "dashed" | "dotted" | "double" | "groove" 
                  | "ridge" | "inset" | "outset" | "none" | "hidden" ;

border_radius_classes = "radius:", "[",
                        corners, ":", radius_values, [","],
                        "]" ;
corners           = "" | "t" | "r" | "b" | "l" | "tl" | "tr" | "br" | "bl" 
                  | "start" | "end" | "start-start" | "start-end" 
                  | "end-start" | "end-end" ;
radius_values     = { radius_value, [","] } ;
radius_value      = length_value | percentage | "full" | "none" ;

border_collapse_classes = "collapse:", "[", "collapse", "separate", "]" ;
border_spacing_classes = "spacing:", "[", spacing_values, "]" ;

outline_classes   = "outline:", "[",
                    "width:", outline_widths, ",",
                    "style:", outline_styles, ",",
                    "color:", color_values, ",",
                    "offset:", length_values,
                    "]" ;
outline_widths    = { length_value, [","] } | "thin" | "medium" | "thick" ;
outline_styles    = { border_style, [","] } | "auto" ;

// ============================================================================
// EFFECTS CLASSES
// ============================================================================
effects_classes   = "effects", "{",
                    box_shadow_classes, text_shadow_classes,
                    mix_blend_mode_classes, filter_classes,
                    backdrop_filter_classes, "}" ;

box_shadow_classes = "box_shadow:", "[",
                     shadows, [",", "none", ",", "sm", ",", "md", ",", "lg",
                     ",", "xl", ",", "2xl", ",", "inner", ",", "outline"],
                     "]" ;
shadows           = { shadow, [","] } ;
shadow            = length_value, length_value, [ length_value ], [ length_value ], color_value 
                  | "inset", length_value, length_value, [ length_value ], [ length_value ], color_value ;

text_shadow_classes = "text_shadow:", "[",
                      shadows, [",", "none"],
                      "]" ;

mix_blend_mode_classes = "mix_blend:", "[",
                         blend_modes, [",", "normal"],
                         "]" ;

filter_classes    = "filter:", "[",
                    filter_functions, [",", "none", ",", "blur", ",", "brightness",
                    ",", "contrast", ",", "drop-shadow", ",", "grayscale",
                    ",", "hue-rotate", ",", "invert", ",", "saturate",
                    ",", "sepia"],
                    "]" ;
filter_functions  = { filter_function, [","] } ;
filter_function   = "blur(", length_value, ")"
                  | "brightness(", percentage, ")"
                  | "contrast(", percentage, ")"
                  | "drop-shadow(", shadow, ")"
                  | "grayscale(", percentage, ")"
                  | "hue-rotate(", angle, ")"
                  | "invert(", percentage, ")"
                  | "saturate(", percentage, ")"
                  | "sepia(", percentage, ")"
                  | "url(", string, ")" ;

backdrop_filter_classes = "backdrop_filter:", "[",
                          filter_functions, [",", "none"],
                          "]" ;

// ============================================================================
// TRANSFORM CLASSES
// ============================================================================
transform_classes = "transforms", "{",
                    transform_2d_classes, transform_3d_classes,
                    transform_origin_classes, transform_style_classes,
                    perspective_classes, perspective_origin_classes,
                    backface_visibility_classes, "}" ;

transform_2d_classes = "2d:", "[",
                       transforms_2d, [",", "translate", ",", "rotate",
                       ",", "scale", ",", "skew", ",", "matrix"],
                       "]" ;
transforms_2d     = { transform_2d, [","] } ;
transform_2d      = "translate(", length_value, [ ",", length_value ], ")"
                  | "translateX(", length_value, ")"
                  | "translateY(", length_value, ")"
                  | "scale(", number, [ ",", number ], ")"
                  | "scaleX(", number, ")"
                  | "scaleY(", number, ")"
                  | "rotate(", angle, ")"
                  | "skew(", angle, [ ",", angle ], ")"
                  | "skewX(", angle, ")"
                  | "skewY(", angle, ")"
                  | "matrix(", number, ",", number, ",", number, ",", number, ",", number, ",", number, ")" ;

transform_3d_classes = "3d:", "[",
                       transforms_3d, [",", "translate3d", ",", "scale3d",
                       ",", "rotate3d", ",", "matrix3d", ",", "perspective"],
                       "]" ;
transforms_3d     = { transform_3d, [","] } ;
transform_3d      = "translate3d(", length_value, ",", length_value, ",", length_value, ")"
                  | "scale3d(", number, ",", number, ",", number, ")"
                  | "rotate3d(", number, ",", number, ",", number, ",", angle, ")"
                  | "matrix3d(", matrix_4x4, ")"
                  | "perspective(", length_value, ")" ;

transform_origin_classes = "origin:", "[",
                           origins, [",", "center", ",", "top", ",", "bottom",
                           ",", "left", ",", "right"],
                           "]" ;
origins           = { origin, [","] } ;
origin            = length_value | percentage | position_keyword ;

transform_style_classes = "style:", "[", "flat", "preserve-3d", "]" ;
perspective_classes = "perspective:", "[", length_values, [",", "none"], "]" ;
perspective_origin_classes = "perspective_origin:", "[", origins, "]" ;
backface_visibility_classes = "backface:", "[", "visible", "hidden", "]" ;

// ============================================================================
// TRANSITION CLASSES
// ============================================================================
transition_classes = "transitions", "{",
                     transition_property_classes, transition_duration_classes,
                     transition_timing_classes, transition_delay_classes,
                     "}" ;

transition_property_classes = "property:", "[",
                              properties, [",", "all", ",", "none", ",", "colors",
                              ",", "opacity", ",", "shadow", ",", "transform"],
                              "]" ;
properties        = { property, [","] } ;

transition_duration_classes = "duration:", "[",
                              durations, [",", "75", ",", "100", ",", "150",
                              ",", "200", ",", "300", ",", "500", ",", "700",
                              ",", "1000"],
                              "]" ;
durations         = { duration, [","] } ;
duration          = time_value | integer ;
time_value        = integer, time_unit ;

transition_timing_classes = "timing:", "[",
                            timing_functions, [",", "linear", ",", "ease",
                            ",", "ease-in", ",", "ease-out", ",", "ease-in-out"],
                            "]" ;
timing_functions  = { timing_function, [","] } ;
timing_function   = cubic_bezier | steps | spring | "linear" | "ease" 
                  | "ease-in" | "ease-out" | "ease-in-out" ;

transition_delay_classes = "delay:", "[",
                           delays, [",", "0", ",", "75", ",", "100", ",", "150",
                           ",", "200", ",", "300", ",", "500", ",", "700",
                           ",", "1000"],
                           "]" ;
delays            = { delay, [","] } ;
delay             = time_value | integer ;

// ============================================================================
// ANIMATION CLASSES
// ============================================================================
animation_classes = "animations", "{",
                    animation_name_classes, animation_duration_classes,
                    animation_timing_classes, animation_delay_classes,
                    animation_iteration_classes, animation_direction_classes,
                    animation_fill_mode_classes, animation_play_state_classes,
                    keyframe_classes, "}" ;

animation_name_classes = "name:", "[",
                         animation_names, [",", "none"],
                         "]" ;
animation_names   = { identifier, [","] } ;

animation_duration_classes = "duration:", "[", durations, "]" ;
animation_timing_classes = "timing:", "[", timing_functions, "]" ;
animation_delay_classes = "delay:", "[", delays, "]" ;

animation_iteration_classes = "iteration:", "[",
                              iterations, [",", "infinite", ",", "1", ",", "2",
                              ",", "3"],
                              "]" ;
iterations        = { iteration, [","] } ;
iteration         = integer | "infinite" ;

animation_direction_classes = "direction:", "[",
                              "normal", "reverse", "alternate", "alternate-reverse",
                              "]" ;

animation_fill_mode_classes = "fill_mode:", "[",
                              "none", "forwards", "backwards", "both",
                              "]" ;

animation_play_state_classes = "play_state:", "[",
                               "running", "paused",
                               "]" ;

keyframe_classes  = "keyframes:", "[",
                    keyframe_definitions, [",", "spin", ",", "ping", ",", "pulse",
                    ",", "bounce", ",", "fade", ",", "slide"],
                    "]" ;
keyframe_definitions = { keyframe_definition, [","] } ;
keyframe_definition = identifier, "{", keyframe_steps, "}" ;
keyframe_steps    = { keyframe_step, [","] } ;
keyframe_step     = percentage, "{", declarations, "}" 
                  | "from", "{", declarations, "}" 
                  | "to", "{", declarations, "}" ;

// ============================================================================
// SVG CLASSES
// ============================================================================
svg_classes       = "svg", "{",
                    svg_fill_classes, svg_stroke_classes,
                    svg_stroke_width_classes, svg_stroke_dasharray_classes,
                    svg_stroke_linecap_classes, svg_stroke_linejoin_classes,
                    svg_vector_effect_classes, svg_paint_order_classes,
                    "}" ;

svg_fill_classes  = "fill:", "[",
                    color_values, [",", "none", ",", "currentColor"],
                    "]" ;

svg_stroke_classes = "stroke:", "[",
                     color_values, [",", "none", ",", "currentColor"],
                     "]" ;

svg_stroke_width_classes = "stroke_width:", "[",
                           stroke_widths, [",", "0", ",", "1", ",", "2"],
                           "]" ;
stroke_widths     = { length_value, [","] } ;

svg_stroke_dasharray_classes = "stroke_dasharray:", "[",
                               dash_arrays, [",", "none"],
                               "]" ;
dash_arrays       = { dash_array, [","] } ;
dash_array        = length_value | "none" ;

svg_stroke_linecap_classes = "stroke_linecap:", "[",
                             "butt", "round", "square",
                             "]" ;

svg_stroke_linejoin_classes = "stroke_linejoin:", "[",
                              "miter", "round", "bevel", "arcs",
                              "]" ;

svg_vector_effect_classes = "vector_effect:", "[",
                            "none", "non-scaling-stroke", "non-rotation",
                            "fixed-position",
                            "]" ;

svg_paint_order_classes = "paint_order:", "[",
                          "normal", "fill", "stroke", "markers",
                          "]" ;

// ============================================================================
// TENSOR CLASSES (Specialized)
// ============================================================================
tensor_classes    = "tensor", "{",
                    tensor_opacity_classes, tensor_transform_classes,
                    tensor_blend_classes, tensor_animation_classes,
                    tensor_gradient_classes, "}" ;

tensor_opacity_classes = "opacity:", "[",
                         tensor_opacity_values, [",", "dynamic"],
                         "]" ;
tensor_opacity_values = { tensor_opacity_value, [","] } ;
tensor_opacity_value = weight_spec | tensor_reference ;

tensor_transform_classes = "transform:", "[",
                           tensor_transforms, [",", "matrix3d", ",", "perspective"],
                           "]" ;
tensor_transforms = { tensor_transform, [","] } ;
tensor_transform  = weight_spec | tensor_function ;

tensor_blend_classes = "blend:", "[",
                       tensor_blend_modes, [",", "normal", ",", "tensor-mix"],
                       "]" ;
tensor_blend_modes = { tensor_blend_mode, [","] } ;
tensor_blend_mode  = "tensor-mix" | "tensor-overlay" | "tensor-dodge" ;

tensor_animation_classes = "animation:", "[",
                           tensor_animations, [",", "tensor-flow", ",", "tensor-wave"],
                           "]" ;
tensor_animations = { tensor_animation, [","] } ;
tensor_animation  = "tensor-keyframes(", tensor_spec, ")" ;

tensor_gradient_classes = "gradient:", "[",
                          tensor_gradients, [",", "tensor-linear", ",", "tensor-radial"],
                          "]" ;
tensor_gradients  = { tensor_gradient, [","] } ;
tensor_gradient   = "tensor-linear(", tensor_spec, ")" 
                  | "tensor-radial(", tensor_spec, ")" ;

tensor_reference  = identifier ;
tensor_function   = identifier, "(", tensor_args, ")" ;
tensor_args       = tensor_spec, { ",", tensor_spec } ;

// ============================================================================
// INTERACTIVITY CLASSES
// ============================================================================
interactivity_classes = "interactivity", "{",
                        cursor_classes, pointer_events_classes,
                        resize_classes, user_select_classes,
                        scroll_behavior_classes, scroll_margin_classes,
                        scroll_padding_classes, scroll_snap_classes,
                        touch_action_classes, will_change_classes,
                        "}" ;

cursor_classes    = "cursor:", "[",
                    cursor_values, [",", "auto", ",", "default", ",", "pointer",
                    ",", "text", ",", "move", ",", "not-allowed", ",", "wait",
                    ",", "progress", ",", "help", ",", "context-menu",
                    ",", "cell", ",", "crosshair", ",", "vertical-text",
                    ",", "alias", ",", "copy", ",", "no-drop", ",", "grab",
                    ",", "grabbing", ",", "all-scroll", ",", "col-resize",
                    ",", "row-resize", ",", "n-resize", ",", "e-resize",
                    ",", "s-resize", ",", "w-resize", ",", "ne-resize",
                    ",", "nw-resize", ",", "se-resize", ",", "sw-resize",
                    ",", "ew-resize", ",", "ns-resize", ",", "nesw-resize",
                    ",", "nwse-resize", ",", "zoom-in", ",", "zoom-out"],
                    "]" ;
cursor_values     = { cursor_value, [","] } ;
cursor_value      = string | "url(", string, ")", [ number, number ] ;

pointer_events_classes = "pointer_events:", "[",
                         "none", "auto",
                         "]" ;

resize_classes    = "resize:", "[",
                    "none", "both", "horizontal", "vertical", "block", "inline",
                    "]" ;

user_select_classes = "user_select:", "[",
                      "none", "text", "all", "auto",
                      "]" ;

scroll_behavior_classes = "scroll_behavior:", "[",
                          "auto", "smooth",
                          "]" ;

scroll_margin_classes = "scroll_margin:", "[",
                        sides, ":", spacing_values, [","],
                        "]" ;

scroll_padding_classes = "scroll_padding:", "[",
                         sides, ":", spacing_values, [","],
                         "]" ;

scroll_snap_classes = "scroll_snap:", "[",
                      "align:", "[", "start", "end", "center", "none", "]", ",",
                      "type:", "[", "none", "x", "y", "both", "mandatory", "proximity", "]",
                      "]" ;

touch_action_classes = "touch_action:", "[",
                       "auto", "none", "pan-x", "pan-y", "manipulation",
                       "]" ;

will_change_classes = "will_change:", "[",
                      properties, [",", "auto", ",", "scroll", ",", "contents",
                      ",", "transform", ",", "opacity"],
                      "]" ;

// ============================================================================
// TABLE CLASSES
// ============================================================================
table_classes     = "tables", "{",
                    table_layout_classes, caption_side_classes,
                    empty_cells_classes, "}" ;

table_layout_classes = "layout:", "[", "auto", "fixed", "]" ;
caption_side_classes = "caption_side:", "[", "top", "bottom", "]" ;
empty_cells_classes = "empty_cells:", "[", "show", "hide", "]" ;

// ============================================================================
// FORM CLASSES
// ============================================================================
form_classes      = "forms", "{",
                    appearance_classes, caret_color_classes,
                    "}" ;

appearance_classes = "appearance:", "[",
                     "none", "auto", "textfield", "menulist-button",
                     "searchfield", "textarea", "push-button", "slider-horizontal",
                     "checkbox", "radio", "square-button", "menulist",
                     "listbox", "meter", "progress-bar",
                     "]" ;

caret_color_classes = "caret_color:", "[",
                      color_values, [",", "auto"],
                      "]" ;

// ============================================================================
// ACCESSIBILITY CLASSES
// ============================================================================
accessibility_classes = "accessibility", "{",
                        forced_color_adjust_classes, 
                        color_adjust_classes,
                        "}" ;

forced_color_adjust_classes = "forced_color_adjust:", "[",
                              "auto", "none",
                              "]" ;

color_adjust_classes = "color_adjust:", "[",
                       "economy", "exact",
                       "]" ;

// ============================================================================
// UTILITY CLASSES
// ============================================================================
utility_classes   = "utilities", "{",
                    container_classes, sr_only_classes,
                    not_sr_only_classes, "}" ;

container_classes = "container:", "[",
                    container_breakpoints, [",", "center"],
                    "]" ;
container_breakpoints = { breakpoint, [","] } ;
breakpoint        = identifier, ":", length_value ;

sr_only_classes   = "sr_only:", "[", "sr-only", "not-sr-only", "]" ;
not_sr_only_classes = "not_sr_only:", "[", "not-sr-only", "]" ;

// ============================================================================
// CUSTOM CLASS GENERATION
// ============================================================================
custom_classes    = "custom", identifier, "{",
                    class_generation_rules, "}" ;

class_generation_rules = { generation_rule } ;
generation_rule   = "generate", class_pattern, "from", data_source, 
                    "with", generator_function ;

class_pattern     = string ;
generator_function = identifier | lambda_expression ;
lambda_expression = "(", parameters, ")", "=>", expression ;
parameters        = { identifier, [","] } ;

// ============================================================================
// CSS VARIABLES
// ============================================================================
css_variable      = "var(", string, [ ",", fallback_value ], ")" ;
fallback_value    = css_value ;
